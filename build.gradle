/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.6/userguide/tutorial_java_projects.html
 */

buildscript {
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.1'
        classpath 'com.guardsquare:proguard-gradle:7.0.0'
    }
}

plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // Apply the application plugin to add support for building a CLI application.
    id 'application'

    id 'kr.entree.spigradle' version '2.2.2'

    id 'com.github.johnrengelman.shadow' version '6.0.0'
}

group 'com.kokumaji'
version '1.0-DEV'
mainClassName = 'com.kokumaji.Warrior.Warrior'
compileJava.options.encoding = 'UTF-8'

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
    mavenCentral()

    maven {
        url 'https://papermc.io/repo/repository/maven-public/'
    }

    maven {
        url 'https://repo.codemc.org/repository/maven-public'
    }

    maven {
        url = 'https://repo.extendedclip.com/content/repositories/placeholderapi/'
    }

}

dependencies {
    // This dependency is used by the application.
    compileOnly 'com.google.guava:guava:29.0-jre'
    compileOnly 'org.projectlombok:lombok:1.18.12'

    shadow "com.zaxxer:HikariCP:3.4.2"
    shadow files('libs/HibiscusAPI.jar')

	annotationProcessor 'org.projectlombok:lombok:1.18.12'

    // testImplementation 'junit:junit:4.13'

    compile files('libs/spigot-1.16.2.jar')
    compileOnly 'me.clip:placeholderapi:2.10.9'
    // compileOnly minecraftServer()
}

shadowJar {
    baseName = "${jar.archivePath}-shadow"
    classifier = ''
    archiveVersion = ''

    project.configurations.implementation.canBeResolved = true
    configurations = [project.configurations.shadow]
}

task obfuscate(type: proguard.gradle.ProGuardTask) {
    injars "${jar.archivePath}"
    outjars "${jar.archivePath}-obf.jar"

    libraryjars configurations.compileOnly
    libraryjars configurations.compile

    ignorewarnings

    keep 'public class com.kokumaji.Warrior.Warrior'
}

spigot {
    description 'A KitPvP Plugin'
    apiVersion '1.16'
}